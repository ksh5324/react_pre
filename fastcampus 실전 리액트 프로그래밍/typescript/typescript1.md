# 정적 타입 그리고 타입스크립트

자바스크립트는 동적 타입 언어다. 따라서 변수의 타입은 런타임에 결정된다. 이와 반대인 정적 타입 언어도 존재한다. 정적 타입 언어는 변수의 타입이 컴파일 타임에 결정된다. 동적 타입 언어에는 파이썬(Python), PHP 등이 있고, 정적 타입 언어에는 자바(java), c++ 등이 있다. 그 차이는 단수해 보이지만, 개발할 때 고려할 것들은 많이 다르다.

이 장에서는 정적 타입 언어인 타입스크립트를 설명한다. 타입스크립트의 문법을 알아보고 타입스크립트로 리액트와 리덕스에 타입 정보를 추가하는 방법을 알아보자.

## 타입스크립트란?

타입스크립트는 자바스크립트의 모든 기능을 포함하면서 정적 타입을 지원하는 언어다. 지금부터 동적 타입 언어와 정적 타입 언어를 비교해 보면서 왜 자바스크립트에 정적 타입이 필요한지 알아보자.

자바스크립트에 정적 타입을 추가해 주는 언어와 도구는 Elm, ReasonML, PureScript, Flow 등 다양하다.

- Elm, ReasonML, PureScript, Flow...

이 언어들에 비해 타입스크립트가 가진 장점은 무엇인지 알아보자.

## 동적 타입 언어와 정적 타입 언어

동적 타입 언어인 자바스크립트에 정적 타입이 왜 필요한지 알아보기 전에, 동적 타입 언어와 정적 타입 언어의 차이를 간단히 알아보자.

| 동적 타입 언어                               | 정적 타입 언어                                                |
| -------------------------------------------- | ------------------------------------------------------------- |
| 타입에 대한 고민을 하지 않아도 되므로 배우기 | 변수를 선언할 때마다 타입을 고민해야 하므로 진입 장벽이 높다. |
| 코드의 양이 적을 때 생산성이 높다.           | 코드의 양이 많을 때 동적 타입 언어에 비해 생산                |
| 타입 오류가 런타임 시 발견된다.              | 타입 오류가 컴파일 시 발견된다.                               |

동적 타입 언어와 정적 타입 언어는 장단점이 서로 달라 팀과 프로젝트의 성격에 따라 선택해야 한다. 작은 규모의 프로젝트에서는 동적 타입 언어를 사용하고, 큰 규모의 프로젝트에서는 정적 타입 언어를 사용하기를 추천한다.

### 정적 타입 언어가 생산성이 높은 이유

정적 타입 언어의 코드는 타입으로 서로 연결되어 있다. 덕분에 연관된 코드 간의 이동이 쉽고, 변수명이나 함수명을 변경하는 등의 리팩터링도 쉽다.

임포트하지 않고 코드를 작성해도 단축키 한 번이면 IDE가 필요한 임포트 코드를 자동으로 넣어 준다. 함수를 호출하기 위해 함수 이름과 괄호를 입력하면 함수의 매개변수 종류와 반환값의 타입을 확인할 수 있다. 속성값의 목록을 확인할 수 있다. 철자가 틀리거나 숫자 타입의 변수에 문자열을 입력하면 IDE가 즉시 알려준다.

좋은 IDE를 사용한다면 동적 타입 언어를 사용해도 이와 같은 기능이 어느 정도는 지원한다. 하지만 IDE가 알 수 있는 제한적이기 때문에 정적 타입 언어 보다 기능이 부족할 수밖에 없다.

## 타입스크립트의 장점

타입스크립트는 마이스크로소프트에서 개발하고 있고 꾸준하게 업데이트 버전이 나오고 있다. 자바스크립트의 새로운 표준이 나오거나 거의 표준이 확실시되는 기능은 타입스크립트에도 빠르게 추가된다. 타입스크립트 측에서 리액트 개발자들의 의견을 잘 반영해 주기 때문에 jsx 문법과 리액트 컴포넌트의 타입을 정의하는 데 큰 어려움이 없다.

타입스크립트는 다른 경쟁 언어에 비해 큰 생태계를 가지고 있다. 웬만큼 유명한 라이브러리에는 타입스크립트의 타입 정의 파일이 존재한다. 타입 정의 파일은 라이브러리 자체에서 가지고 있거나, DefinitelyTyped라는 깃허브 저장소에 포함되어 있다. 타입스크립트는 마이크로소프트에서 개발하고 있는 IDE인 vscode와 궁합이 잘 맞는다. vscode는 특별한 설정 없이도 타입스크립트 파일의 타입 검사를 자동으로 실행한다. 또한 타입스크립트를 이용해서 자바스크립트 파일도 타입 검사를 하기 때문에 레거시 프로젝트에서 유용하다. vscode는 타입스크립트 코드를 위한 다양한 리팩터링 기능을 지원하기 때문에 생산성에 큰 도움이 된다.
이러한 vscode라는 뛰어난 IDE의 존재는 타입스크립트를 선택하는 중요한 요소로 작용하므로 타입스크립트로 개발한다면 IDE로 vscode를 사용할 것을 추천한다.

```ts
let v1 = 123; // 1
v1 = "abc"; // 타입 에러 2
```

1 변수 v1에 마우스를 올려 놓으면 let v1: number라는 문구가 보인다. 타입스크립트는 변수 v1의 타입이 숫자라는 것을 알고있다.  
2 타입이 숫자인 변수에 문자열을 입력하면 컴파일 타임에 에러가 발생한다. 즉, 코드를 실행 보기도 전에 에러를 확인할 수 있다.

위 코드에서 변수 v1의 타입을 명시적으로 입력하지 않아도 타입스크립트가 숫자 타입으로 인식하는 것을 확인했다. 이렇게 자동으로 타입을 인식하는 기능을 타입 추론이라 한다. 타입 추론 덕분에 기존의 자바스크립트 코드를 크게 변경하지 않고도 타입스크립트를 비교적 쉽게 적용할 수 있다. 타입 추론에 대한 자세한 설명은 뒤에서 설명한다.

## 타입스크립트에서 타입을 선언하는 방법

```ts
let v1: number | string = 123; // 1
v1 = "abc"; // 2
```

1 변수 v1을 숫자나 문자열인 타입으로 정의했다. 변수 이름 오른쪽에 콜론과 함께 타입을 선언할 수 있다.  
2 변수 v1은 문자열도 포함하는 타입이므로 타입 에러가 발생하지 않는다.

## 타입스크립트의 다양한 타입

```ts
const size: number = 123;
const isBig: boolean = size >= 100;
const msg: string = isBig ? "크다" : "작다";

const values: number[] = [1, 2, 3];
const values2: Array<number> = [1, 2, 3];

values.push("a"); // 타입 에러

const data: [string, number] = [msg, size];
data[0].substr(1);
data[1].substr(1); // 타입 에러
```

### null undefined

```ts
let v1: undefined = undefined;
let v2: null = null;
v1 = 123; // 타입 에러

let v3: number | undefined = undefined;
v3 = 123;
```

### 문자열 리타럴과 숫자 리터럴 타입

```ts
let v1: 10 | 20 | 30;
v1 = 10;
v1 = 15; // 타입 에러

let v2: "경찰관" | "소방관";
v2 = "의사"; // 타입 에러
```

### any

```ts
let value: any;
value = 123;
value = "456";
value = () => {};
```

any 타입에는 숫자와 문자열뿐만 아니라 함수도 입력될 수 있다.

### void never 타입

아무 값도 반환되지 않고 종료되는 함수의 반환 타입은 void 타입으로 정의할 수 있다. 그리고 항상 예외가 발생해서 비정상적으로 종료되거나 무한 루프 때문에 종료되지 않는 함수의 반환 타입은 never 타입으로 정의할 수 있다.

다음은 void와 never 타입을 사용한 코드다.

```ts
function f1(): void {
  console.log("hello");
}
function f2(): never {
  throw new Error("some error");
}
function f3(): never {
  while (true) {
    //...
  }
}
```

f3은 함수가 종료되지 않으므로 never 타입으로 정의했다.

### object 타입

```ts
let v: object;
v = { name: "abc" };
console.log(v.prop1); // 타입 에러
```

여기서 속성 정보를 포함해서 타입을 정의하기 위해서는 인터페이스를 사용해야 한다.

### 교차 타입과 유니온 타입

여러 타입의 교칩합과 각각 교차 타입과 유니온 타입으로 표현할 수 있다. 교차 타입은 & 기호, 유니온 타입은 | 기호로 정의한다.

```ts
let v1: (1 | 3 | 5) & (3 | 5 | 7); // => 3 | 5
v3 = 3;
v1 = 1; // 타입 에러
```

### type 키워드로 타입에 별칭 주기

```ts
type Width = number | string;
let width: Width;
width = 100;
width = "100px";
```

### 열거형 타입

열거형 타입은 enum 키워드를 사용해서 정의한다. 열거형 타입의 각 원소는 값으로 사용될 수 있고, 타입으로 사용될 수도 있다.
